(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{35:function(e,t,a){"use strict";a(0),a(38);var n=a(1);t.a=function(e){return Object(n.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}},38:function(e,t,a){},42:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return d}));var n=a(12),i="REQUIRE",r="MINLENGTH",s="MAXLENGTH",c="EMAIL",l=function(){return{type:i}},u=function(e){return{type:r,val:e}},o=function(){return{type:c}},d=function(e,t){var a,l=!0,u=Object(n.a)(t);try{for(u.s();!(a=u.n()).done;){var o=a.value;o.type===i&&(l=l&&e.trim().length>0),o.type===r&&(l=l&&e.trim().length>=o.val),o.type===s&&(l=l&&e.trim().length<=o.val),"MIN"===o.type&&(l=l&&+e>=o.val),"MAX"===o.type&&(l=l&&+e<=o.val),o.type===c&&(l=l&&/^\S+@\S+\.\S+$/.test(e))}}catch(d){u.e(d)}finally{u.f()}return l}},43:function(e,t,a){"use strict";var n=a(4),i=a(39),r=a(0),s=a(42),c=(a(44),a(1)),l=function(e,t){switch(t.type){case"CHANGE":return Object(i.a)(Object(i.a)({},e),{},{value:t.val,isValid:Object(s.d)(t.val,t.validators)});case"TOUCH":return Object(i.a)(Object(i.a)({},e),{},{isTouched:!0});default:return e}};t.a=function(e){var t=Object(r.useReducer)(l,{value:e.initialValue||"",isValid:e.initialValid||!1,isTouched:!1}),a=Object(n.a)(t,2),i=a[0],s=a[1],u=e.onInput,o=e.id,d=i.value,p=i.isValid;Object(r.useEffect)((function(){u(o,d,p)}),[u,o,d,p]);var j=function(t){s({type:"CHANGE",val:t.target.value,validators:e.validators})},b=function(){s({type:"TOUCH"})},v="textarea"===e.element?Object(c.jsx)("textarea",{id:e.id,rows:e.rows||3,value:i.value,onBlur:b,onChange:j}):Object(c.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,value:i.value,onBlur:b,onChange:j});return Object(c.jsxs)("div",{className:"form-control ".concat(!i.isValid&&i.isTouched&&"form-control--invalid"),children:[Object(c.jsx)("label",{htmlFor:e.id,children:e.label}),v,!i.isValid&&i.isTouched&&Object(c.jsx)("p",{children:e.errorText})]})}},44:function(e,t,a){},45:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(4),i=a(46),r=a(39),s=a(0),c=function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(r.a)(Object(r.a)({},e),{},{inputs:Object(r.a)(Object(r.a)({},e.inputs),{},Object(i.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});case"SET_DATA":return{inputs:t.inputs,formIsValid:t.formIsValid};default:return e}},l=function(e,t){var a=Object(s.useReducer)(c,{inputs:e,isValid:t}),i=Object(n.a)(a,2),r=i[0],l=i[1];return[r,Object(s.useCallback)((function(e,t,a){l({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[l]),Object(s.useCallback)((function(e,t){l({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},52:function(e,t,a){"use strict";var n=a(4),i=a(0),r=a(10),s=(a(53),a(1));t.a=function(e){var t=Object(i.useState)(),a=Object(n.a)(t,2),c=a[0],l=a[1],u=Object(i.useState)(),o=Object(n.a)(u,2),d=o[0],p=o[1],j=Object(i.useState)(!1),b=Object(n.a)(j,2),v=b[0],f=b[1],O=Object(i.useRef)();Object(i.useEffect)((function(){if(c){var e=new FileReader;e.onload=function(){p(e.result)},e.readAsDataURL(c)}}),[c]);return Object(s.jsxs)("div",{className:"form-control",children:[Object(s.jsx)("input",{type:"file",ref:O,style:{display:"none"},accept:".jpg,.png,.jpeg",onChange:function(t){var a,n=v;t.target.files&&1===t.target.files.length?(a=t.target.files[0],l(a),f(!0),n=!0):(f(!1),n=!1),e.onInput(e.id,a,n)},id:e.id}),Object(s.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[Object(s.jsxs)("div",{className:"image-upload__preview",children:[d&&Object(s.jsx)("img",{src:d,alt:"preview"}),!d&&Object(s.jsx)("p",{children:"Please pick an image."})]}),Object(s.jsx)(r.a,{onClick:function(){O.current.click()},type:"button",children:"PICK IMAGE"})]}),!v&&Object(s.jsx)("p",{children:e.errorText})]})}},53:function(e,t,a){},58:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(39),i=a(36),r=a.n(i),s=a(37),c=a(4),l=a(0),u=a(10),o=a(43),d=a(35),p=a(11),j=a(41),b=a(8),v=a(45),f=a(42),O=a(2),h=a(40),m=(a(58),a(52)),x=a(1);t.default=function(e){var t=Object(l.useState)(!0),a=Object(c.a)(t,2),i=a[0],g=a[1],y=Object(h.a)(),V=y.isLoading,w=y.error,I=y.sendRequest,T=y.clearError,N=Object(v.a)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),k=Object(c.a)(N,3),C=k[0],E=k[1],S=k[2],A=Object(l.useContext)(b.a),P=Object(O.f)(),R=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(C.inputs),!i){e.next=15;break}return e.prev=3,e.next=6,I("https://share-placesapp.herokuapp.com/api/users/login","POST",JSON.stringify({email:C.inputs.email.value,password:C.inputs.password.value}),{"Content-Type":"application/json"});case 6:a=e.sent,A.login(a.userId,a.token),P("/"),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:e.next=30;break;case 15:return e.prev=15,(n=new FormData).append("name",C.inputs.name.value),n.append("image",C.inputs.image.value),n.append("email",C.inputs.email.value),n.append("password",C.inputs.password.value),e.next=23,I("https://share-placesapp.herokuapp.com/api/users/signup","POST",n);case 23:s=e.sent,A.login(s.userId,s.token),P("/"),e.next=30;break;case 28:e.prev=28,e.t1=e.catch(15);case 30:case"end":return e.stop()}}),e,null,[[3,11],[15,28]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(l.Fragment,{children:[Object(x.jsx)(j.a,{error:w,onClear:T}),Object(x.jsxs)(d.a,{className:"authentication",children:[V&&Object(x.jsx)(p.a,{asOverlay:!0}),Object(x.jsx)("h2",{className:"authentication_header",children:"Login Required"}),Object(x.jsx)("hr",{}),Object(x.jsxs)("form",{onSubmit:R,children:[!i&&Object(x.jsx)(o.a,{id:"name",type:"text",label:"Your Name",validators:[f.c],errorText:"Please enter a valid name",onInput:E}),!i&&Object(x.jsx)(m.a,{center:!0,id:"image",onInput:E}),Object(x.jsx)(o.a,{id:"email",type:"email",label:"Email",validators:[Object(f.a)()],errorText:"Please enter a valid email",onInput:E}),Object(x.jsx)(o.a,{id:"password",type:"password",label:"Password",validators:[Object(f.b)(6)],errorText:"Please enter a valid password (min. 6 characters)",onInput:E}),Object(x.jsx)(u.a,{disabled:!C.isValid,children:i?"Login":"Sign Up"})]}),Object(x.jsxs)(u.a,{inverse:!0,onClick:function(){i?S(Object(n.a)(Object(n.a)({},C.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):S(Object(n.a)(Object(n.a)({},C.inputs),{},{name:void 0,image:void 0}),C.inputs.email.isValid&&C.inputs.password.isValid),g((function(e){return!e}))},children:["Switch to ",i?"Sign Up":"Login"]})]})]})}}}]);
//# sourceMappingURL=4.dda1196c.chunk.js.map